# Smart Reader
Программа для чтения электронных книг в формате txt, она позволяет:
* управлять локальной библиотекой;
* добавлять закладки в тексте;
* выгружать локальную библиотеку на сервер;
* получать доступ к своей библиотеке на любом компьютере.


## Server

##### Database
Таблицы:
1. user (id, login, pass)
2. book (id, title, owner_id, cur_state) - cur_state: на каком месте остановился
3. bookmark (id, book_id, state, description)
4. session (user_id, token) - текущии сессии

Сами книжки храним в виде файлов c именами равными book_id.

## Client

##### Auth
Для аутентификации пользователь единожды вводит свой логин и пароль, эти данные
сразу отправляются на сервер. Сервер возвращает токен (бессрочный), который 
сохраняется у пользователя, и который в дальнейшем используется клиентом при
инициализации TCP сессии.

##### Sessions
После инициализации TCP соеденения первым сообщением клиент отправляет свой token.
Если токена нет, то отправляется запрос для его получения по логину и паролю.

##### Downloads and Uploads
Загрузка и выгрузка книжек осуществляется через TCP Socket.Sendfile

##### Requests
1. Аутентификация           (loign, pass) => token
2. Деаутентификация         () => 'OK'
3. Получить список книжек   () => book_list
4. Получить список закладок (book_id) => bookmark_list
4. Скачать книжку           (book_id) => book_file
5. Загрузить книжку         (book_file) => 'OK'
6. Удалить книжку           (book_id) => 'OK'

##### Problems
1. Как будем хранить закладки?
По идее просто как число - смещение от начала.
2. Как передавать информацию о типе запроса, типа type='auth'|'delete book'|'get book'